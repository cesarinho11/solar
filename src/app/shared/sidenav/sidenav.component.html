<div class="sidebar text-white d-flex flex-column" [class.expanded]="isExpanded">
  <!-- Botón toggle -->


  <div >
    <div class="img p-3" >
        <img [src]=" isExpanded ? '../../../assets/logoSF.png' : '../../../assets/logomini.png'" [ngClass]="isExpanded ? 'wlogo' : 'wlogomini'"  alt="">
    </div>
    
    <button class="btn toggle-btn text-white" (click)="toggleSidebar()">
        <i class="bi" [ngClass]="isExpanded ? 'bi-chevron-left' : 'bi-list'"></i>
  </button>
  </div>    

  <ul class="nav flex-column mt-3">
    <li class="nav-item position-relative" *ngFor="let item of menuItems">
      <a  class="nav-link text-white d-flex align-items-center justify-content-between"    [routerLink]="!item.subItems ? item.route : null"
         (click)="item.subItems ? toggleSubmenu(item.label) : onMenuClick()">
        <div class="d-flex align-items-center" >
          <i class="bi me-2" [class]="item.icon"></i>
          <span *ngIf="isExpanded">{{ item.label }}</span>
        </div>

        <i *ngIf="item.subItems && isExpanded" class="bi"
           [ngClass]="{
             'bi-chevron-down': activeMenu === item.label,
             'bi-chevron-right': activeMenu !== item.label
           }">
        </i>
      </a>

      <!-- Submenú expandido dentro del sidebar -->
      <ul *ngIf="item.subItems && isExpanded && activeMenu === item.label"
          class="nav flex-column ms-4 submenu">
        <li class="nav-item" *ngFor="let sub of item.subItems" [routerLink]="sub.route" (click)="onMenuClick()" >
            <span  class="nav-link text-white-50" ><i class="bi me-2" [class]="sub.icon"></i> {{ sub.label }} </span>
        </li>
      </ul>

      <!-- Submenú flotante cuando el sidebar está colapsado -->
      <div *ngIf="item.subItems && !isExpanded && openFloatingMenu === item.label"
           class="submenu-float bg-dark text-white shadow-sm p-2 rounded">
        <div class="fw-bold mb-1">{{ item.label }}</div>
        <ul class="list-unstyled m-0">
          <li *ngFor="let sub of item.subItems"  [routerLink]="sub.route" (click)="onMenuClick()">
            
            <span  class="nav-link text-white-50"><i class="bi me-2" [class]="sub.icon"></i> {{ sub.label }}</span>
          </li>
        </ul>
      </div>


    </li>
  </ul>
</div>
